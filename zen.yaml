moduleName: test-zen
title: Test Gen
description: Sample configuration for gen
env:
  - name: JWT_KEY
    structName: JWTKey
    type: string
  - name: PORT
    type: int
  - name: DATABASE_URL
    structName: DatabaseURL
    type: string

commands:
  - name: server
    type: api
  - name: websocket
    type: websocket
  - name: crawler
    type: worker

databases:
  - name: postgres
    type: postgres
    models:
      - name: users
        type: user
        owner: admin
      - name: devices
        type: data
        owner: user
        properties:
          - name: platform
            type: string
          - name: device_token
            type: string
          - name: status
            type: string

  - name: mongo
    type: mongo
    models:
      - name: users
        type: user
        owner: admin
      - name: devices
        type: data
        owner: user
        properties:
          - name: platform
            type: string
          - name: device_token
            type: string
          - name: status
            type: string

api:
  title: Main API
  description: Main API Description
  paths:
    /auth/signin:
      post:
        summary: Sign in
        operationId: signIn
        requestBody: SignInRequest
        successResponse: 200
        responseBody: AuthResponse
        security: BearerAuth

  schemas:
    SignInRequest:
      required:
        - username
        - password
      properties:
        username:
          type: string
        password:
          type: string

services:
  - name: admin
    database: postgres
